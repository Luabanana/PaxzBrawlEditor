function saveChanges() {
    var selectedCharacter = document.getElementById("characterSelect").value;
    var newCastingRange = document.getElementById("castingRange").value;

    // Fetch the original CSV file
    fetch('skills.csv')
        .then(response => response.text())
        .then(data => {
            // Split CSV by lines
            var lines = data.split('\n');
            // Loop through lines to find and replace CastingRange for the selected character
            var newData = lines.map(line => {
                var cells = line.split(',');
                if (cells[0] === selectedCharacter) {
                    // Assuming CastingRange is at index 9
                    cells[9] = newCastingRange;
                }
                return cells.join(',');
            });
            // Join lines back into CSV format
            var updatedCSV = newData.join('\n');

            // Download the updated CSV file
            var encodedUri = encodeURI("data:text/csv;charset=utf-8," + updatedCSV);
            var link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "edited_skills.csv");
            document.body.appendChild(link);

            link.click();
        });
}
